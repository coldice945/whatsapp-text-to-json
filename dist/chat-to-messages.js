var e=require("fs");const t=/(image|audio|video) omitted$/;let r;function n(e){return 8206===(e=e.trim()).charCodeAt(0)?e.slice(1):e}function s(e){if("["!==e[0])return null;const t=e.slice(7,11),r=parseInt(e.slice(4,6))-1,n=e.slice(1,3),s=e.slice(13,15),i=e.slice(16,18),c=e.slice(19,21);return new Date(t,r,n,s,i,c)}function i(e){let t=e.indexOf(":");if(t>=0)return e.slice(0,t);if(t=e.search(/\s(left|changed|was|were)/),t>=0){r=!0;const n=e.slice(0,t);return"You"===n?"You":n}return null}function c(e,t){return t&&(e=e.slice(t.length+2)),e}const o=process.argv[2],l=process.argv.slice(2),a=!l.includes("-m"),u=l.includes("-nt");if(!o)throw Error("No filename provided.");let f,d=o.slice(0,-4)+"-messages.json";try{f=function(e,o,l){const a=e.split("\n"),u=[];for(let e=0,f=a.length;e<f;e++){const f=n(a[e]);if(!f.length||o&&t.test(f))continue;r=!1;const d=s(f.slice(0,22));if(d){const e=f.slice(23),t=i(e),n=r?e:c(e,t);u.push({date:d,user:t,message:n,...l?{}:{type:r?"action":"message"}})}else u[u.length-2].message+="\n"+f}return{data:u}}(e.readFileSync(o,"utf8"),a,u)}catch(e){throw Error("Error loading file. Make sure the filename is correct and target file exists.")}if(!f)throw Error("No data returned.");e.writeFile(d,JSON.stringify(f),e=>{if(e)throw e;console.log("Written to "+d+"...")});
//# sourceMappingURL=chat-to-messages.js.map
